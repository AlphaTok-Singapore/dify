# AlphaMind-Dify 集成项目环境变量配置
# 复制此文件为 .env 并根据您的环境进行配置

# =============================================================================
# 核心配置
# =============================================================================

# OpenAI API 密钥 (必需)
OPENAI_API_KEY=your_openai_api_key_here

# 其他 AI 服务 API 密钥 (可选)
ANTHROPIC_API_KEY=your_anthropic_api_key_here
GOOGLE_API_KEY=your_google_api_key_here

# =============================================================================
# 数据库配置
# =============================================================================

# PostgreSQL 数据库配置
POSTGRES_DB=dify
POSTGRES_USER=postgres
POSTGRES_PASSWORD=difyai123456
DATABASE_URL=postgresql://postgres:difyai123456@db:5432/dify

# Redis 配置
REDIS_PASSWORD=difyai123456
REDIS_URL=redis://:difyai123456@redis:6379/0
CELERY_BROKER_URL=redis://:difyai123456@redis:6379/1

# =============================================================================
# Dify 配置
# =============================================================================

# Dify 密钥配置
SECRET_KEY=sk-9f73s3ljTXVcMT3Blb3ljTqtsKiGHXVcMT3BlbkFJLK7U
INIT_PASSWORD=password123

# Dify API 配置
WEB_API_CORS_ALLOW_ORIGINS=*
CONSOLE_CORS_ALLOW_ORIGINS=*
CONSOLE_WEB_URL=
CONSOLE_API_URL=
SERVICE_API_URL=
APP_WEB_URL=

# Weaviate 向量数据库配置
WEAVIATE_ENDPOINT=http://weaviate:8080
WEAVIATE_API_KEY=WVF5YThaHlkYwhGUSmCRgsX3tD5ngdN8pkih

# =============================================================================
# AlphaMind 配置
# =============================================================================

# AlphaMind API 配置
ALPHAMIND_JWT_SECRET_KEY=alphamind-secret-key-2024
ALPHAMIND_API_PORT=8000
ALPHAMIND_WEB_PORT=3001

# AlphaMind 前端配置
NEXT_PUBLIC_API_URL=http://localhost/api/alphamind
NEXT_PUBLIC_DIFY_API_URL=http://localhost/api

# =============================================================================
# n8n 工作流引擎配置
# =============================================================================

# n8n 数据库配置
N8N_DB_TYPE=postgresdb
N8N_DB_POSTGRESDB_HOST=db
N8N_DB_POSTGRESDB_PORT=5432
N8N_DB_POSTGRESDB_DATABASE=n8n
N8N_DB_POSTGRESDB_USER=postgres
N8N_DB_POSTGRESDB_PASSWORD=difyai123456

# n8n 认证配置
N8N_BASIC_AUTH_ACTIVE=true
N8N_BASIC_AUTH_USER=admin
N8N_BASIC_AUTH_PASSWORD=password123

# n8n 网络配置
N8N_HOST=0.0.0.0
N8N_PORT=5678
N8N_PROTOCOL=http
WEBHOOK_URL=http://localhost/n8n/

# n8n API 密钥 (可选，用于 AlphaMind 集成)
N8N_API_KEY=your_n8n_api_key_here

# =============================================================================
# 服务端口配置
# =============================================================================

# 主要服务端口
HTTP_PORT=80
HTTPS_PORT=443

# 数据库端口
POSTGRES_PORT=5432
REDIS_PORT=6379
WEAVIATE_PORT=8080

# 应用服务端口
DIFY_API_PORT=5001
DIFY_WEB_PORT=3000
N8N_PORT=5678

# =============================================================================
# 日志和调试配置
# =============================================================================

# 日志级别
LOG_LEVEL=INFO
FLASK_ENV=production
NODE_ENV=production

# 调试模式 (生产环境请设置为 false)
FLASK_DEBUG=false
NEXT_DEBUG=false

# =============================================================================
# 安全配置
# =============================================================================

# JWT 配置
JWT_SECRET_KEY=alphamind-secret-key-2024
JWT_ACCESS_TOKEN_EXPIRES=3600

# 会话配置
SESSION_TIMEOUT=86400

# CORS 配置
CORS_ALLOW_ORIGINS=*
CORS_ALLOW_METHODS=GET,POST,PUT,DELETE,OPTIONS
CORS_ALLOW_HEADERS=DNT,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type,Range,Authorization

# =============================================================================
# 存储配置
# =============================================================================

# 文件上传配置
MAX_FILE_SIZE=100M
UPLOAD_FOLDER=/app/storage/uploads

# 静态文件配置
STATIC_FOLDER=/app/storage/static

# =============================================================================
# 邮件配置 (可选)
# =============================================================================

# SMTP 配置
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your_email@gmail.com
SMTP_PASSWORD=your_email_password
SMTP_USE_TLS=true

# 邮件发送配置
MAIL_FROM=noreply@alphamind.com
MAIL_FROM_NAME=AlphaMind

# =============================================================================
# 监控和分析配置 (可选)
# =============================================================================

# Sentry 错误监控
SENTRY_DSN=your_sentry_dsn_here

# Google Analytics
GA_TRACKING_ID=your_ga_tracking_id_here

# =============================================================================
# 第三方服务配置 (可选)
# =============================================================================

# AWS S3 配置
AWS_ACCESS_KEY_ID=your_aws_access_key
AWS_SECRET_ACCESS_KEY=your_aws_secret_key
AWS_S3_BUCKET=your_s3_bucket_name
AWS_S3_REGION=us-east-1

# 阿里云 OSS 配置
ALIYUN_OSS_ACCESS_KEY_ID=your_aliyun_access_key
ALIYUN_OSS_ACCESS_KEY_SECRET=your_aliyun_secret_key
ALIYUN_OSS_BUCKET=your_oss_bucket_name
ALIYUN_OSS_ENDPOINT=oss-cn-hangzhou.aliyuncs.com

# =============================================================================
# 开发环境配置 (仅开发时使用)
# =============================================================================

# 开发模式
DEV_MODE=false

# 热重载
HOT_RELOAD=false

# 调试端口
DEBUG_PORT=9229

# =============================================================================
# 备份和恢复配置
# =============================================================================

# 数据库备份配置
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=30
BACKUP_STORAGE_PATH=/app/backups

# =============================================================================
# 性能配置
# =============================================================================

# 工作进程数
WORKER_PROCESSES=4
WORKER_CONNECTIONS=1024

# 缓存配置
CACHE_TTL=3600
CACHE_MAX_SIZE=1000

# 请求限制
RATE_LIMIT_PER_MINUTE=60
RATE_LIMIT_PER_HOUR=1000

# =============================================================================
# 注意事项
# =============================================================================

# 1. 请确保所有密钥和密码都是强密码
# 2. 生产环境中请更改所有默认密码
# 3. 确保 OPENAI_API_KEY 已正确设置
# 4. 根据您的域名配置相应的 URL
# 5. 定期备份数据库和重要文件

